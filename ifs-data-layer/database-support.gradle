task startMySql(type:Exec) {
    workingDir '../'
    println workingDir
    commandLine 'docker-compose', '-f', 'docker-compose.yml', 'up', '-d', 'mysql'
    doLast {
        exec {
            //wait for sql container to start.
            //TODO need better method of waiting for startup.
            workingDir '.'
            commandLine 'sleep', '10'
        }
    }
}

task createTestSchema(type:Exec) {
    workingDir '../'
    commandLine 'docker-compose', '-f', 'docker-compose.yml',  'exec', '-T', 'mysql' ,'mysql' ,'-uroot' ,'-ppassword' ,'-e', 'create database if not exists ifs_test'
    commandLine 'docker-compose', '-f', 'docker-compose.yml',  'exec', '-T', 'mysql' ,'mysql' ,'-uroot' ,'-ppassword' ,'-e', 'create database if not exists ifs_finance_test'
}