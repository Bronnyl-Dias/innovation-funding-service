ext.openshiftEnv = project.properties['openshiftEnv'] ?: "automated"

if (!isNamedEnv()) {
    ext.server_url = "ifs.local-dev"
    ext.authorisation_url = "auth.local-dev:9443"
} else {
    ext.server_url = "perf.apps.prod.ifs-test-clusters.com"
    ext.authorisation_url = "auth-perf.apps.prod.ifs-test-clusters.com"
}

task prepareDeployment(type: Copy) {

    destinationDir = file('./')

    from('jmeter/Representative/') {
        include '**/*.yml'
    }
    filesMatching("**/**.*") {
        expand project.properties
    }
}

task osRunTaurus(type: Exec) {
    dependsOn prepareDeployment
    executable = 'setup-files/scripts/openshift/taurus.sh'
    args = []
}