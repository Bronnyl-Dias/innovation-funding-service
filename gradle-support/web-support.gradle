apply from: rootProject.file("gradle-support/java-spring-boot.gradle")

buildscript {

    ext['thymeleaf.version'] = '3.0.3.RELEASE'

    ext {
        thymeleafVersion = ext['thymeleaf.version']
    }

    repositories {
        jcenter()
    }

}

// ifs-web-core is not a docker project.
if (project.name != 'ifs-web-core') {

    apply from: rootProject.file("gradle-support/openshift-build.gradle")
    apply from: rootProject.file("gradle-support/prepare-docker.gradle")

    ext.dockerDir = "$project.parent.projectDir/docker/"

    buildDocker.dependsOn ":docker:app-base-image:buildDocker"
    buildDocker.dependsOn prepareDockerInput
    buildDocker.tag = "innovateuk/"+project.name.replaceAll(/ifs-/,"")+":latest"
    buildDocker.inputDir = project.file("$project.buildDir/docker")
    tagDocker.imageId="innovateuk/"+project.name.replaceAll(/ifs-/,"")+":latest"
}

