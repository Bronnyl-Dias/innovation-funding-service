ext.openshiftEnv = project.properties['openshiftEnv'] ?: "automated"

if (!isNamedEnv()) {
    ext.server_url = "ifs.local-dev"
    ext.authorisation_url = "auth.local-dev:9443"
} else {
    ext.server_url = project.serverUrl
    ext.authorisation_url = project.authorisationUrl
}

task prepareTaurusDeployment(type: Copy) {

    destinationDir = file('./')

    from('jmeter/Representative/') {
        include '**/taurus.yml'
    }
    filesMatching("**/**.*") {
        expand project.properties
    }
}

task osRunTaurus(type: Exec) {
    dependsOn prepareTaurusDeployment
    executable = 'setup-files/scripts/openshift/os-taurus.sh'
    args = []
}